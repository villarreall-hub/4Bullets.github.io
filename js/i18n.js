
const translations = {
    es: {
        "nav-home": "Inicio",
        "nav-portfolio": "Portafolio",
        "nav-photo": "Fotografía",
        "nav-graphic": "Diseño Gráfico",
        "nav-3d": "Diseño 3D",
        "nav-contact": "Contacto",
        "nav-lang": "English",
        "hero-photo": "Fotografía",
        "hero-graphic": "Diseño Gráfico",
        "hero-3d": "Diseño 3D",
        "hero-btn": "Ver Portafolio",
        "pres-hi": "Hola!",
        "pres-p1": "Me llamo Leonardo, pero todo el mundo me dice Leo. Soy un diseñador gráfico de Baja California, México. Con un interés por el diseño minimalista e industrial.",
        "pres-p2": "Me gusta explorar artistas y tendencias (ya sea dentro o fuera del diseño gráfico), para ir ampliando mis inspiraciones al momento de trabajar.",
        "pres-resume": "Ver Curriculum",
        "resume-edu": "Educación",
        "resume-exp": "Experiencia",
        "resume-skills": "Habilidades",
        "resume-lang": "Idiomas",
        "edu-degree": "Licenciatura en Diseño Gráfico",
        "edu-focus": "Enfoque en Identidad Visual y Diseño Editorial.",
        "edu-google": "Google Marketing Digital e E-Commerce",
        "edu-google-desc": "Especialización en SEO, SEM y estrategias de E-Commerce.",
        "exp-freelance": "Freelance (4BULLETS)",
        "exp-role-freelance": "Diseñador Gráfico (2020 - Presente)",
        "exp-freelance-desc": "Desarrollo de branding, material publicitario y gestión de redes para diversos clientes.",
        "exp-buro": "Buró de diseño UABC",
        "exp-role-buro": "Diseñador Gráfico (2024)",
        "exp-buro-desc": "Creación de identidad visual para proyectos de la universidad.",
        "exp-flow": "Flow Marketing Group",
        "exp-role-flow": "Diseñador Gráfico (2025)",
        "exp-flow-desc": "Apoyo en la creación de contenido visual para campañas digitales y redes sociales.",
        "lang-es": "Español",
        "lang-es-level": "Nativo",
        "lang-en": "Inglés",
        "lang-en-level": "MCER B2",
        "lang-en-desc": "Conversacional y técnico.",
        "logos-title": "Logos y<br>proyectos.",
        "logos-desc": "Orgulloso de haber trabajado para una variedad de proyectos.",
        "swap-title": "Descubre<br>lo que<br>",
        "cat-photo": "Fotografía",
        "cat-graphic": "Diseño Gráfico",
        "cat-3d": "Diseño 3D",
        "line1": "Descubre",
        "line2": "lo que",
        "word-hago": "hago",
        "word-foto": "fotografío",
        "word-diseno": "diseño",
        "word-modelo": "modelo",

        // Photography Page
        "photo-title": "Fotografía",
        "photo-subtitle": "Capturas que cuentan historias y preservan momentos.",
        "cat-motorsport": "Automovilismo",
        "cat-business": "Negocio",
        "cat-art": "Arte",
        "cat-landscape": "Paisaje",
        "proj-autodromo": "Autódromo",
        "proj-autodromo-desc": "Inmortalizando la velocidad en el Hermanos Rodríguez.",
        "proj-kenblock": "Ken Block",
        "proj-kenblock-desc": "Tributo a la leyenda del drifting y el control total.",
        "proj-gigi": "GiGi Nails",
        "proj-gigi-desc": "Fotografía comercial y de marca para estética profesional.",
        "proj-soumaya": "Museo Soumaya",
        "proj-soumaya-desc": "Arquitectura y ángulos abstractos en la Ciudad de México.",
        "proj-teotihuacan": "Teotihuacán",
        "proj-teotihuacan-desc": "La majestuosidad de las pirámides bajo la lente.",

        // 3D Design Page
        "3d-title": "Diseño 3D",
        "3d-subtitle": "Modelado, visualización y prototipado tridimensional.",
        "cat-3dmod": "Modelado 3D",
        "cat-proto": "Prototipado",
        "proj-headphones": "Audífonos Personalizados",
        "proj-headphones-desc": "Modelado y diseño de audífonos personalizados con un enfoque único.",
        "proj-switch": "Nintendo Switch",
        "proj-switch-desc": "Modelado de consola y Joy-Cons con visualización de producto.",
        "proj-sable": "Sable de Luz",
        "proj-sable-desc": "Modelado detallado del icónico sable de luz de Darth Vader.",
        "proj-macetas": "Macetas",
        "proj-macetas-desc": "Estudios de volumetría y diseño industrial para hogar.",
        "proj-llaveros": "Llaveros",
        "proj-llaveros-desc": "Diseños de accesorios y piezas funcionales para impresión.",

        // Graphic Design Page
        "graphic-title": "Identidades Gráficas",
        "graphic-subtitle": "Construcción de marcas sólidas y lenguajes visuales coherentes.",
        "cat-redesign": "Rediseño",
        "cat-branding": "Branding",
        "cat-social": "Social Media",
        "graphic-extras": "Extras",
        "proj-posters": "Carteles",
        "proj-posters-desc": "Exploración visual y composición publicitaria.",
        "proj-posts": "Posts",
        "proj-posts-desc": "Creatividades para plataformas digitales y marcas.",

        // Contact Page
        "contact-title": "HOLA",
        "contact-subtitle": "¿LISTO PARA EMPEZAR? HABLEMOS DE TU PRÓXIMO PROYECTO.",
        "contact-email": "Email",
        "contact-popup-title": "",
        "contact-popup-btn": "contáctame",

        // General
        "drawer-project": "Proyecto",
        "more-info": "click para más información",
        "hide-info": "ocultar"
    },
    en: {
        "nav-home": "Home",
        "nav-portfolio": "Portfolio",
        "nav-photo": "Photography",
        "nav-graphic": "Graphic Design",
        "nav-3d": "3D Design",
        "nav-contact": "Contact",
        "nav-lang": "Español",
        "hero-photo": "Photography",
        "hero-graphic": "Graphic Design",
        "hero-3d": "3D Design",
        "hero-btn": "View Portfolio",
        "pres-hi": "Hi!",
        "pres-p1": "I'm Leonardo, but you can call me Leo. I'm a graphic designer based in Baja California, Mexico, with a passion for minimalist and industrial aesthetics.",
        "pres-p2": "I’m constantly exploring emerging artists and global trends to refine my craft and find fresh inspiration for every project.",
        "pres-resume": "View Resume",
        "resume-edu": "Education",
        "resume-exp": "Experience",
        "resume-skills": "Skills",
        "resume-lang": "Languages",
        "edu-degree": "B.A. in Graphic Design",
        "edu-focus": "Specializing in Visual Identity and Editorial Design.",
        "edu-google": "Google Digital Marketing & E-Commerce",
        "edu-google-desc": "Specialized training in SEO, SEM, and E-Commerce growth strategies.",
        "exp-freelance": "Freelance (4BULLETS)",
        "exp-role-freelance": "Graphic Designer (2020 - Present)",
        "exp-freelance-desc": "Leading brand development, marketing collateral design, and social media strategy for a diverse client base.",
        "exp-buro": "UABC Design Bureau",
        "exp-role-buro": "Graphic Designer (2024)",
        "exp-buro-desc": "Crafting polished visual identities for key university initiatives.",
        "exp-flow": "Flow Marketing Group",
        "exp-role-flow": "Graphic Designer (2025)",
        "exp-flow-desc": "Produced engaging visual content for high-impact digital campaigns and social platforms.",
        "lang-es": "Spanish",
        "lang-es-level": "Native",
        "lang-en": "English",
        "lang-en-level": "CEFR B2",
        "lang-en-desc": "Professional and conversational proficiency.",
        "logos-title": "Logos &<br>Projects.",
        "logos-desc": "Proud to have collaborated on a wide range of creative challenges.",
        "line1": "Discover",
        "line2": "what",
        "cat-photo": "Photography",
        "cat-graphic": "Graphic Design",
        "cat-3d": "3D Design",
        "word-hago": "I do",
        "word-foto": "I photograph",
        "word-diseno": "I design",
        "word-modelo": "I model",

        // Photography Page
        "photo-title": "Photography",
        "photo-subtitle": "Visual narratives that capture and preserve the essence of a moment.",
        "cat-motorsport": "Motorsports",
        "cat-business": "Lifestyle & Brand",
        "cat-art": "Conceptual",
        "cat-landscape": "Landscapes",
        "proj-autodromo": "The Circuit",
        "proj-autodromo-desc": "Capturing the raw speed and energy of the Hermanos Rodríguez circuit.",
        "proj-kenblock": "Ken Block Tribute",
        "proj-kenblock-desc": "A photographic homage to a legend of precision and drifting.",
        "proj-gigi": "GiGi Nails",
        "proj-gigi-desc": "High-end brand photography for professional aesthetic services.",
        "proj-soumaya": "Soumaya Museum",
        "proj-soumaya-desc": "Exploring the avant-garde architecture and geometric abstractions of CDMX.",
        "proj-teotihuacan": "Teotihuacan",
        "proj-teotihuacan-desc": "A fresh perspective on the architectural majesty of the ancient pyramids.",

        // 3D Design Page
        "3d-title": "3D Design",
        "3d-subtitle": "High-fidelity modeling, product visualization, and digital prototyping.",
        "cat-3dmod": "3D Modeling",
        "cat-proto": "Prototyping",
        "proj-headphones": "Custom Headphones",
        "proj-headphones-desc": "Conceptual 3D modeling and specialized design for custom audio hardware.",
        "proj-switch": "Nintendo Switch",
        "proj-switch-desc": "Precision console modeling and realistic product visualization.",
        "proj-sable": "Lightsaber",
        "proj-sable-desc": "Intricate 3D reconstruction of Darth Vader's iconic hilt.",
        "proj-macetas": "Pots",
        "proj-macetas-desc": "Industrial design studies focused on home decor and volumetric exploration.",
        "proj-llaveros": "Keychain",
        "proj-llaveros-desc": "Functional additive manufacturing projects and 3D-printable accessories.",

        // Graphic Design Page
        "graphic-title": "Graphic Identities",
        "graphic-subtitle": "Crafting robust brand identities and cohesive visual systems.",
        "cat-redesign": "Rebranding",
        "cat-branding": "Branding",
        "cat-social": "Social Media",
        "graphic-extras": "Extras",
        "proj-posters": "Posters",
        "proj-posters-desc": "Experimental visual design and creative advertising layout.",
        "proj-posts": "Digital Content",
        "proj-posts-desc": "Strategic assets and engaging content for digital brand presence.",

        // Contact Page
        "contact-title": "SAY HELLO",
        "contact-subtitle": "READY TO START? LET'S TALK ABOUT YOUR NEXT PROJECT.",
        "contact-email": "Email",
        "contact-popup-title": "",
        "contact-popup-btn": "contact me",

        // General
        "drawer-project": "Project",
        "more-info": "click for more information",
        "hide-info": "hide"
    }
};

document.addEventListener('DOMContentLoaded', () => {
    const langButtons = document.querySelectorAll('[data-lang-btn]');
    const currentLang = localStorage.getItem('preferredLanguage') || 'es';

    // Set initial language
    setLanguage(currentLang);

    langButtons.forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            const newLang = localStorage.getItem('preferredLanguage') === 'es' ? 'en' : 'es';
            setLanguage(newLang);
        });
    });
});

function setLanguage(lang) {
    localStorage.setItem('preferredLanguage', lang);
    document.documentElement.lang = lang;

    // 1. Regular text translations
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            // If it's a text-roll or special button, we need to be careful with the inner span logic
            if (el.classList.contains('text-roll') || el.classList.contains('btn-custom')) {
                // If the i18n is on a rolling element, update its text and re-trigger letters if necessary
                // However, script.js handles rolling on load. 
                // Better approach: update innerText and let a helper re-init the roll if needed.
                el.innerText = translations[lang][key];
                reinitRoll(el);
            } else {
                el.innerHTML = translations[lang][key];
            }
        }
    });

    // 2. Special case: Word swap words (if on index)
    if (typeof window.updateSwapWords === 'function') {
        window.updateSwapWords(lang);
    }

    // 3. Refresh active drawer if open
    if (typeof window.refreshDrawer === 'function') {
        window.refreshDrawer(lang);
    }
}

// Helper to re-initialize the letter rolling animation after text change
function reinitRoll(el) {
    const text = el.innerText.trim();
    el.innerHTML = '';

    const mask = document.createElement('span');
    mask.className = 'btn-text-mask';

    const initialLayer = document.createElement('span');
    initialLayer.className = 'text-layer initial';

    const hoverLayer = document.createElement('span');
    hoverLayer.className = 'text-layer hover';

    const createLetters = (targetSpan) => {
        [...text].forEach((char, index) => {
            const s = document.createElement('span');
            s.textContent = char === ' ' ? '\u00A0' : char;
            s.className = 'char';
            s.style.transitionDelay = `${index * 0.025}s`;
            targetSpan.appendChild(s);
        });
    };

    createLetters(initialLayer);
    createLetters(hoverLayer);

    mask.appendChild(initialLayer);
    mask.appendChild(hoverLayer);
    el.appendChild(mask);
}
